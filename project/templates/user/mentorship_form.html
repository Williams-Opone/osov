<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Apply for EICP | Our Story Our Voice</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="icon" type="image/x-icon" href="{{url_for('static', filename='favicon.ico')}}">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&family=Poppins:wght@500;700&display=swap" rel="stylesheet">
    
    <style>body { font-family: 'Inter', sans-serif; } h1,h2,h3 { font-family: 'Poppins', sans-serif; }</style>
</head>
<body class="bg-gray-50 text-gray-800 antialiased min-h-screen flex flex-col">

    {% include 'user/header.html' %}

    <div class="flex-grow flex items-center justify-center pt-28 pb-12 px-4 md:px-6">
        
        <div class="max-w-3xl w-full bg-white rounded-3xl shadow-xl overflow-hidden border border-gray-100">
            
            <div class="bg-slate-900 px-6 py-6 md:px-8 md:py-8 text-white relative overflow-hidden">
                <div class="absolute top-0 right-0 w-32 h-32 bg-red-600 rounded-full blur-3xl opacity-20 -mr-10 -mt-10"></div>
                
                <h2 class="text-xl md:text-2xl font-bold relative z-10">EICP Application Form</h2>
                <p class="text-gray-300 text-sm mt-1 relative z-10">Empower & Integrate Community Program. Please select your track.</p>
            </div>

            <form method="POST" class="p-6 md:p-8 space-y-6 md:space-y-8">
                <input type="hidden" name="csrf_token" value="{{csrf_token()}}">

                <div>
                    <label class="block text-sm font-bold text-gray-700 mb-2">Which program are you applying for?</label>
                    <div class="relative">
                        <select id="program_track" name="program_track" required class="w-full px-4 py-3 rounded-xl border border-gray-300 focus:ring-2 focus:ring-red-500 focus:border-red-500 bg-white appearance-none outline-none transition" onchange="toggleFields()">
                            <option value="" disabled selected>Select a path...</option>
                            <option value="youth_school">Youth Mentorship (Grades 7-12)</option>
                            <option value="idp_reintegration">IDP Reintegration & Skills</option>
                            <option value="youth_addiction">Youth Support & Counseling</option>
                            <option value="intercultural">Intercultural Tuition</option>
                        </select>
                        <div class="absolute inset-y-0 right-0 flex items-center px-4 pointer-events-none text-gray-500">
                            <i class="fa-solid fa-chevron-down text-xs"></i>
                        </div>
                    </div>
                </div>

                <div id="youth-fields" class="hidden space-y-6 border-l-4 border-red-500 pl-4 md:pl-6 bg-red-50/30 p-4 md:p-6 rounded-r-xl transition-all duration-300">
                    <h3 class="font-bold text-gray-900 text-lg flex items-center gap-2">
                        <i class="fa-solid fa-graduation-cap text-red-500"></i> Student Details
                    </h3>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Child's First Name</label>
                            <input type="text" name="child_fname" class="w-full px-4 py-2.5 rounded-lg border border-gray-300 focus:ring-red-500 focus:border-red-500 outline-none">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Child's Last Name</label>
                            <input type="text" name="child_lname" class="w-full px-4 py-2.5 rounded-lg border border-gray-300 focus:ring-red-500 focus:border-red-500 outline-none">
                        </div>
                    </div>
                
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Current Grade</label>
                            <select name="grade_level" class="w-full px-4 py-2.5 rounded-lg border border-gray-300 focus:ring-red-500 focus:border-red-500 outline-none bg-white">
                                <option value="Grade 7">Grade 7</option>
                                <option value="Grade 8">Grade 8</option>
                                <option value="Grade 9">Grade 9</option>
                                <option value="Grade 10">Grade 10</option>
                                <option value="Grade 11">Grade 11</option>
                                <option value="Grade 12">Grade 12</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">School Name</label>
                            <input type="text" name="school_name" class="w-full px-4 py-2.5 rounded-lg border border-gray-300 focus:ring-red-500 focus:border-red-500 outline-none">
                        </div>
                    </div>
                
                    <hr class="border-red-100">
                
                    <h3 class="font-bold text-gray-900 flex items-center gap-2">
                        <i class="fa-solid fa-user-shield text-red-500"></i> Parent/Guardian Consent
                    </h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Guardian Full Name</label>
                            <input type="text" name="guardian_name" class="w-full px-4 py-2.5 rounded-lg border border-gray-300 focus:ring-red-500 focus:border-red-500 outline-none">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Guardian Email</label>
                            <input type="email" name="parent_email" value="{{ current_user.email }}" class="w-full px-4 py-2.5 rounded-lg border border-gray-300 focus:ring-red-500 focus:border-red-500 outline-none">
                        </div>
                    </div>
                </div>

                <div id="idp-fields" class="hidden space-y-6 border-l-4 border-orange-500 pl-4 md:pl-6 bg-orange-50/30 p-4 md:p-6 rounded-r-xl transition-all duration-300">
                    <h3 class="font-bold text-gray-900 text-lg flex items-center gap-2">
                        <i class="fa-solid fa-briefcase text-orange-500"></i> Skill Development
                    </h3>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Vocational Interest</label>
                        <select name="vocational_interest" class="w-full px-4 py-2.5 rounded-lg border border-gray-300 focus:ring-orange-500 focus:border-orange-500 outline-none bg-white">
                            <option value="Baking">Baking & Culinary</option>
                            <option value="Tailoring">Tailoring & Fashion</option>
                            <option value="Tech">Tech & Digital Skills</option>
                            <option value="Agriculture">Agriculture</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Do you have a business idea? (For Microfinance)</label>
                        <textarea name="business_idea" rows="3" class="w-full px-4 py-2.5 rounded-lg border border-gray-300 focus:ring-orange-500 focus:border-orange-500 outline-none" placeholder="Briefly describe your business idea..."></textarea>
                    </div>
                </div>

                <div>
                    <label class="block text-sm font-bold text-gray-700 mb-2">Why do you want to join this program?</label>
                    <textarea name="goals" rows="4" required class="w-full px-4 py-3 rounded-xl border border-gray-300 focus:ring-2 focus:ring-red-500 focus:border-red-500 outline-none resize-y" placeholder="Tell us about your goals..."></textarea>
                </div>

                <button type="submit" class="w-full bg-red-600 hover:bg-red-700 text-white font-bold py-4 rounded-xl shadow-lg transition transform hover:-translate-y-0.5">
                    Submit Application
                </button>
            </form>
        </div>
    </div>

    {% include 'user/footer.html' %}

    <script>
        function toggleFields() {
            const track = document.getElementById('program_track').value;
            const youthFields = document.getElementById('youth-fields');
            const idpFields = document.getElementById('idp-fields');

            // Reset all first
            youthFields.classList.add('hidden');
            idpFields.classList.add('hidden');

            // Show specific
            if (track === 'youth_school') {
                youthFields.classList.remove('hidden');
            } else if (track === 'idp_reintegration') {
                idpFields.classList.remove('hidden');
            }
        }
    </script>
</body>
</html>